<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulador de Angi√≥grafo - Sistema de Hemodinamia</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #000;
            color: #fff;
            overflow: hidden;
            user-select: none;
        }

        .system-container {
            display: flex;
            flex-direction: column;
            height: 100vh;
        }

        /* Header del Sistema */
        .system-header {
            background: linear-gradient(180deg, #1a1a1a 0%, #0a0a0a 100%);
            padding: 10px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 2px solid #00d4ff;
            z-index: 1000;
        }

        .system-logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .system-logo h1 {
            font-size: 1.3rem;
            color: #00d4ff;
            font-weight: 600;
        }

        .system-logo .subtitle {
            font-size: 0.75rem;
            color: #666;
        }

        .system-status {
            display: flex;
            gap: 20px;
            align-items: center;
        }

        .status-item {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 5px 12px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 5px;
            font-size: 0.8rem;
        }

        .status-indicator {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: #00ff00;
            box-shadow: 0 0 10px #00ff00;
            animation: pulse-indicator 2s infinite;
        }

        @keyframes pulse-indicator {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .status-indicator.warning {
            background: #ffaa00;
            box-shadow: 0 0 10px #ffaa00;
        }

        /* √Årea Principal */
        .main-workspace {
            display: flex;
            flex: 1;
            overflow: hidden;
        }

        /* Monitor Principal */
        .main-monitor {
            flex: 1;
            background: #0a0a0a;
            position: relative;
            display: flex;
            flex-direction: column;
        }

        .monitor-display {
            flex: 1;
            position: relative;
            background: #000;
            border: 2px solid #333;
        }

        #fluoroscopyCanvas {
            width: 100%;
            height: 100%;
            display: block;
        }

        /* Overlay de informaci√≥n en pantalla */
        .fluoro-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            pointer-events: none;
            z-index: 10;
        }

        .overlay-top {
            position: absolute;
            top: 15px;
            left: 15px;
            right: 15px;
            display: flex;
            justify-content: space-between;
        }

        .overlay-bottom {
            position: absolute;
            bottom: 15px;
            left: 15px;
            right: 15px;
            display: flex;
            justify-content: space-between;
        }

        .info-panel {
            background: rgba(0, 0, 0, 0.8);
            padding: 10px 15px;
            border-radius: 5px;
            border: 1px solid #00d4ff;
            font-size: 0.85rem;
            line-height: 1.6;
        }

        .info-panel .label {
            color: #00d4ff;
            font-weight: bold;
        }

        .info-panel .value {
            color: #fff;
            margin-left: 8px;
        }

        /* Crosshair y marcadores */
        .crosshair-center {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 40px;
            height: 40px;
            pointer-events: none;
        }

        .crosshair-center::before,
        .crosshair-center::after {
            content: '';
            position: absolute;
            background: #00ff00;
            opacity: 0.6;
        }

        .crosshair-center::before {
            top: 50%;
            left: 0;
            right: 0;
            height: 1px;
        }

        .crosshair-center::after {
            left: 50%;
            top: 0;
            bottom: 0;
            width: 1px;
        }

        .grid-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: 
                repeating-linear-gradient(0deg, rgba(0, 212, 255, 0.1) 0px, transparent 1px, transparent 50px, rgba(0, 212, 255, 0.1) 51px),
                repeating-linear-gradient(90deg, rgba(0, 212, 255, 0.1) 0px, transparent 1px, transparent 50px, rgba(0, 212, 255, 0.1) 51px);
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .grid-overlay.visible {
            opacity: 1;
        }

        /* Medidores de radiaci√≥n */
        .radiation-meters {
            position: absolute;
            bottom: 80px;
            right: 15px;
            background: rgba(0, 0, 0, 0.9);
            padding: 15px;
            border-radius: 5px;
            border: 1px solid #ff4757;
        }

        .meter-item {
            margin-bottom: 10px;
            font-size: 0.8rem;
        }

        .meter-label {
            color: #ffaa00;
            margin-bottom: 3px;
        }

        .meter-bar {
            width: 150px;
            height: 8px;
            background: #333;
            border-radius: 4px;
            overflow: hidden;
        }

        .meter-fill {
            height: 100%;
            background: linear-gradient(90deg, #00ff00 0%, #ffaa00 50%, #ff4757 100%);
            transition: width 0.3s;
        }

        /* Panel de Control Lateral */
        .control-panel {
            width: 380px;
            background: linear-gradient(180deg, #1a1a1a 0%, #0d0d0d 100%);
            border-left: 2px solid #333;
            display: flex;
            flex-direction: column;
            overflow-y: auto;
        }

        .control-section {
            padding: 15px;
            border-bottom: 1px solid #333;
        }

        .control-section h3 {
            color: #00d4ff;
            font-size: 1rem;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* Controles de Angulaci√≥n */
        .gantry-control {
            background: rgba(255, 255, 255, 0.03);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
        }

        .angle-display {
            display: flex;
            justify-content: space-around;
            margin-bottom: 15px;
        }

        .angle-value {
            text-align: center;
        }

        .angle-label {
            font-size: 0.75rem;
            color: #888;
            margin-bottom: 5px;
        }

        .angle-number {
            font-size: 1.8rem;
            color: #00d4ff;
            font-weight: bold;
            font-family: 'Courier New', monospace;
        }

        .angle-unit {
            font-size: 1rem;
            color: #666;
        }

        /* Joystick Virtual */
        .joystick-container {
            display: flex;
            gap: 15px;
            margin-top: 15px;
        }

        .joystick {
            flex: 1;
            position: relative;
            width: 140px;
            height: 140px;
            background: radial-gradient(circle, #2a2a2a 0%, #1a1a1a 100%);
            border-radius: 50%;
            border: 3px solid #333;
            box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.8);
        }

        .joystick-label {
            text-align: center;
            font-size: 0.8rem;
            color: #888;
            margin-top: 8px;
        }

        .joystick-handle {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #00d4ff 0%, #0099cc 100%);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            cursor: grab;
            box-shadow: 0 0 20px rgba(0, 212, 255, 0.5);
            border: 2px solid #00ffff;
        }

        .joystick-handle:active {
            cursor: grabbing;
        }

        .joystick-center {
            position: absolute;
            top: 50%;
            left: 50%;
            width: 8px;
            height: 8px;
            background: #ff4757;
            border-radius: 50%;
            transform: translate(-50%, -50%);
        }

        /* Direcciones del joystick */
        .joystick-directions {
            position: absolute;
            width: 100%;
            height: 100%;
        }

        .direction-label {
            position: absolute;
            font-size: 0.7rem;
            color: #666;
            font-weight: bold;
        }

        .dir-up { top: 5px; left: 50%; transform: translateX(-50%); }
        .dir-down { bottom: 5px; left: 50%; transform: translateX(-50%); }
        .dir-left { left: 5px; top: 50%; transform: translateY(-50%); }
        .dir-right { right: 5px; top: 50%; transform: translateY(-50%); }

        /* Botones de Control */
        .control-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 15px;
        }

        .control-btn {
            padding: 12px;
            background: linear-gradient(135deg, #2a2a2a 0%, #1a1a1a 100%);
            border: 2px solid #444;
            border-radius: 8px;
            color: #fff;
            font-size: 0.85rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .control-btn:hover {
            border-color: #00d4ff;
            background: linear-gradient(135deg, #00d4ff 0%, #0099cc 100%);
            color: #000;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 212, 255, 0.3);
        }

        .control-btn:active {
            transform: translateY(0);
        }

        .control-btn.active {
            background: linear-gradient(135deg, #00d4ff 0%, #0099cc 100%);
            color: #000;
            border-color: #00ffff;
            box-shadow: 0 0 20px rgba(0, 212, 255, 0.5);
        }

        .control-btn.danger {
            border-color: #ff4757;
        }

        .control-btn.danger:hover {
            background: linear-gradient(135deg, #ff4757 0%, #cc3344 100%);
            border-color: #ff6677;
        }

        .control-btn.success {
            border-color: #00ff88;
        }

        .control-btn.success:hover {
            background: linear-gradient(135deg, #00ff88 0%, #00cc66 100%);
        }

        /* Sliders de Par√°metros */
        .parameter-control {
            margin-bottom: 15px;
        }

        .parameter-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 0.85rem;
        }

        .parameter-label {
            color: #aaa;
        }

        .parameter-value {
            color: #00d4ff;
            font-weight: bold;
            font-family: 'Courier New', monospace;
        }

        .parameter-slider {
            width: 100%;
            height: 6px;
            border-radius: 3px;
            background: #333;
            outline: none;
            -webkit-appearance: none;
        }

        .parameter-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: linear-gradient(135deg, #00d4ff 0%, #0099cc 100%);
            cursor: pointer;
            box-shadow: 0 0 10px rgba(0, 212, 255, 0.5);
        }

        .parameter-slider::-moz-range-thumb {
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: linear-gradient(135deg, #00d4ff 0%, #0099cc 100%);
            cursor: pointer;
            border: none;
        }

        /* Presets de Vistas */
        .view-presets {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
            margin-top: 15px;
        }

        .preset-btn {
            padding: 10px;
            background: rgba(0, 212, 255, 0.1);
            border: 1px solid #00d4ff;
            border-radius: 5px;
            color: #00d4ff;
            font-size: 0.75rem;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }

        .preset-btn:hover {
            background: #00d4ff;
            color: #000;
            transform: scale(1.05);
        }

        .preset-btn.active {
            background: #00d4ff;
            color: #000;
        }

        /* Modo de Adquisici√≥n */
        .acquisition-mode {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .mode-btn {
            flex: 1;
            padding: 15px 10px;
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid #444;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }

        .mode-btn .icon {
            font-size: 1.5rem;
            margin-bottom: 5px;
        }

        .mode-btn .label {
            font-size: 0.75rem;
            color: #888;
        }

        .mode-btn:hover {
            border-color: #00d4ff;
        }

        .mode-btn.active {
            background: rgba(0, 212, 255, 0.2);
            border-color: #00d4ff;
        }

        .mode-btn.active .label {
            color: #00d4ff;
        }

        /* Panel de Informaci√≥n del Paciente */
        .patient-info {
            background: rgba(0, 0, 0, 0.5);
            padding: 12px;
            border-radius: 5px;
            margin-top: 15px;
        }

        .patient-info-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 0.8rem;
        }

        .patient-info-label {
            color: #666;
        }

        .patient-info-value {
            color: #fff;
            font-weight: 600;
        }

        /* Indicadores de Dosis */
        .dose-indicators {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 15px;
        }

        .dose-card {
            background: rgba(255, 170, 0, 0.1);
            padding: 10px;
            border-radius: 5px;
            border: 1px solid #ffaa00;
            text-align: center;
        }

        .dose-label {
            font-size: 0.7rem;
            color: #ffaa00;
            margin-bottom: 5px;
        }

        .dose-value {
            font-size: 1.2rem;
            color: #fff;
            font-weight: bold;
            font-family: 'Courier New', monospace;
        }

        .dose-unit {
            font-size: 0.7rem;
            color: #888;
            margin-left: 3px;
        }

        /* Panel de Colimaci√≥n */
        .collimation-control {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 15px;
        }

        .collimation-slider {
            background: rgba(255, 255, 255, 0.05);
            padding: 10px;
            border-radius: 5px;
        }

        .collimation-label {
            font-size: 0.75rem;
            color: #888;
            margin-bottom: 8px;
            text-align: center;
        }

        /* Pedal Virtual */
        .pedal-controls {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            padding: 15px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
        }

        .pedal {
            flex: 1;
            padding: 20px;
            background: linear-gradient(135deg, #2a2a2a 0%, #1a1a1a 100%);
            border: 3px solid #444;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.1s;
            text-align: center;
            position: relative;
        }

        .pedal:active {
            transform: translateY(5px);
            box-shadow: inset 0 5px 10px rgba(0, 0, 0, 0.5);
        }

        .pedal.fluoro {
            border-color: #ffaa00;
        }

        .pedal.fluoro.active {
            background: linear-gradient(135deg, #ffaa00 0%, #ff8800 100%);
            box-shadow: 0 0 30px rgba(255, 170, 0, 0.8);
        }

        .pedal.cine {
            border-color: #ff4757;
        }

        .pedal.cine.active {
            background: linear-gradient(135deg, #ff4757 0%, #cc3344 100%);
            box-shadow: 0 0 30px rgba(255, 71, 87, 0.8);
        }

        .pedal-icon {
            font-size: 2rem;
            margin-bottom: 8px;
        }

        .pedal-label {
            font-size: 0.85rem;
            color: #888;
            font-weight: 600;
        }

        .pedal.active .pedal-label {
            color: #fff;
        }

        /* Scrollbar personalizado */
        .control-panel::-webkit-scrollbar {
            width: 8px;
        }

        .control-panel::-webkit-scrollbar-track {
            background: #0a0a0a;
        }

        .control-panel::-webkit-scrollbar-thumb {
            background: #333;
            border-radius: 4px;
        }

        .control-panel::-webkit-scrollbar-thumb:hover {
            background: #00d4ff;
        }

        /* Quick Actions */
        .quick-actions {
            display: flex;
            gap: 8px;
            margin-top: 15px;
        }

        .quick-btn {
            flex: 1;
            padding: 10px;
            background: rgba(0, 212, 255, 0.1);
            border: 1px solid #00d4ff;
            border-radius: 5px;
            color: #00d4ff;
            font-size: 0.75rem;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }

        .quick-btn:hover {
            background: #00d4ff;
            color: #000;
        }

        /* Responsive */
        @media (max-width: 1200px) {
            .control-panel {
                width: 320px;
            }
        }

        @media (max-width: 900px) {
            .main-workspace {
                flex-direction: column;
            }
            
            .control-panel {
                width: 100%;
                max-height: 400px;
            }
        }

        /* Loading Animation */
        .loading-system {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
        }

        .loading-spinner {
            width: 60px;
            height: 60px;
            border: 4px solid rgba(0, 212, 255, 0.1);
            border-top: 4px solid #00d4ff;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .loading-text {
            color: #00d4ff;
            font-size: 1.2rem;
            margin-bottom: 10px;
        }

        .loading-subtext {
            color: #666;
            font-size: 0.9rem;
        }
    </style>
</head>
<body>
    <div class="loading-system" id="loadingSystem">
        <div class="loading-spinner"></div>
        <div class="loading-text">Iniciando Sistema de Hemodinamia</div>
        <div class="loading-subtext">Calibrando angi√≥grafo...</div>
    </div>

    <div class="system-container">
        <!-- Header del Sistema -->
        <div class="system-header">
            <div class="system-logo">
                <div>
                    <h1>‚öïÔ∏è SIMULADOR ANGI√ìGRAFO</h1>
                    <div class="subtitle">Hospital Alberto Sabogal Sologuren - Servicio de Hemodinamia</div>
                </div>
            </div>
            <div class="system-status">
                <div class="status-item">
                    <div class="status-indicator"></div>
                    <span>Sistema Activo</span>
                </div>
                <div class="status-item">
                    <div class="status-indicator warning"></div>
                    <span>Modo Simulaci√≥n</span>
                </div>
                <div class="status-item">
                    <span id="systemTime">--:--:--</span>
                </div>
            </div>
        </div>

        <!-- √Årea de Trabajo Principal -->
        <div class="main-workspace">
            <!-- Monitor Principal -->
            <div class="main-monitor">
                <div class="monitor-display">
                    <canvas id="fluoroscopyCanvas"></canvas>
                    
                    <!-- Overlay de Informaci√≥n -->
                    <div class="fluoro-overlay">
                        <div class="overlay-top">
                            <div class="info-panel">
                                <div><span class="label">PACIENTE:</span><span class="value" id="patientName">SIMULACI√ìN</span></div>
                                <div><span class="label">ESTUDIO:</span><span class="value" id="studyType">CORONARIOGRAF√çA</span></div>
                                <div><span class="label">PROTOCOLO:</span><span class="value" id="protocol">EST√ÅNDAR</span></div>
                            </div>
                            
                            <div class="info-panel">
                                <div><span class="label">kV:</span><span class="value" id="displayKv">75</span></div>
                                <div><span class="label">mA:</span><span class="value" id="displayMa">800</span></div>
                                <div><span class="label">FPS:</span><span class="value" id="displayFps">15</span></div>
                            </div>
                        </div>
                        
                        <div class="overlay-bottom">
                            <div class="info-panel">
                                <div><span class="label">RAO/LAO:</span><span class="value" id="displayRao">0.0¬∞</span></div>
                                <div><span class="label">CRAN/CAUD:</span><span class="value" id="displayCran">0.0¬∞</span></div>
                                <div><span class="label">SID:</span><span class="value">100 cm</span></div>
                            </div>
                            
                            <div class="info-panel">
                                <div><span class="label">ZOOM:</span><span class="value" id="displayZoom">100%</span></div>
                                <div><span class="label">FILTRO:</span><span class="value" id="displayFilter">NINGUNO</span></div>
                                <div><span class="label">MODO:</span><span class="value" id="displayMode">ESPERA</span></div>
                            </div>
                        </div>
                        
                        <div class="crosshair-center"></div>
                        <div class="grid-overlay" id="gridOverlay"></div>
                    </div>

                    <!-- Medidores de Radiaci√≥n -->
                    <div class="radiation-meters">
                        <div class="meter-item">
                            <div class="meter-label">DOSIS ACUMULADA</div>
                            <div class="meter-bar">
                                <div class="meter-fill" id="doseMeter" style="width: 0%"></div>
                            </div>
                            <div style="font-size: 0.75rem; color: #fff; margin-top: 3px;">
                                <span id="doseValue">0</span> mGy
                            </div>
                        </div>
                        <div class="meter-item">
                            <div class="meter-label">TIEMPO FLUOROSCOPIA</div>
                            <div class="meter-bar">
                                <div class="meter-fill" id="timeMeter" style="width: 0%; background: #00d4ff;"></div>
                            </div>
                            <div style="font-size: 0.75rem; color: #fff; margin-top: 3px;">
                                <span id="fluoTime">00:00</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Panel de Control -->
            <div class="control-panel">
                <!-- Control de Angulaci√≥n -->
                <div class="control-section">
                    <h3>üéØ Control de Angulaci√≥n</h3>
                    <div class="gantry-control">
                        <div class="angle-display">
                            <div class="angle-value">
                                <div class="angle-label">RAO/LAO</div>
                                <div>
                                    <span class="angle-number" id="raoValue">0.0</span>
                                    <span class="angle-unit">¬∞</span>
                                </div>
                            </div>
                            <div class="angle-value">
                                <div class="angle-label">CRAN/CAUD</div>
                                <div>
                                    <span class="angle-number" id="cranValue">0.0</span>
                                    <span class="angle-unit">¬∞</span>
                                </div>
                            </div>
                        </div>

                        <div class="joystick-container">
                            <div>
                                <div class="joystick" id="joystickRAO">
                                    <div class="joystick-directions">
                                        <span class="direction-label dir-up">LAO</span>
                                        <span class="direction-label dir-down">RAO</span>
                                    </div>
                                    <div class="joystick-center"></div>
                                    <div class="joystick-handle" id="handleRAO"></div>
                                </div>
                                <div class="joystick-label">RAO/LAO</div>
                            </div>
                            
                            <div>
                                <div class="joystick" id="joystickCRAN">
                                    <div class="joystick-directions">
                                        <span class="direction-label dir-up">CRAN</span>
                                        <span class="direction-label dir-down">CAUD</span>
                                    </div>
                                    <div class="joystick-center"></div>
                                    <div class="joystick-handle" id="handleCRAN"></div>
                                </div>
                                <div class="joystick-label">CRAN/CAUD</div>
                            </div>
                        </div>

                        <div class="control-buttons">
                            <button class="control-btn" onclick="resetAngles()">üîÑ Reset</button>
                            <button class="control-btn" onclick="parkPosition()">üè† Park</button>
                        </div>
                    </div>

                    <h3 style="margin-top: 20px;">üìê Vistas Predefinidas</h3>
                    <div class="view-presets">
                        <button class="preset-btn" onclick="setPresetView('RAO30')">RAO 30¬∞</button>
                        <button class="preset-btn" onclick="setPresetView('LAO45')">LAO 45¬∞</button>
                        <button class="preset-btn" onclick="setPresetView('LAO60')">LAO 60¬∞</button>
                        <button class="preset-btn" onclick="setPresetView('RAO30CRAN')">RAO 30¬∞ Cran</button>
                        <button class="preset-btn" onclick="setPresetView('LAO45CRAN')">LAO 45¬∞ Cran</button>
                        <button class="preset-btn" onclick="setPresetView('APCRAN')">AP Cran 30¬∞</button>
                        <button class="preset-btn" onclick="setPresetView('RAO30CAUD')">RAO 30¬∞ Caud</button>
                        <button class="preset-btn" onclick="setPresetView('LAO45CAUD')">LAO 45¬∞ Caud</button>
                        <button class="preset-btn" onclick="setPresetView('APCAUD')">AP Caud 30¬∞</button>
                    </div>
                </div>

                <!-- Modo de Adquisici√≥n -->
                <div class="control-section">
                    <h3>üìπ Modo de Adquisici√≥n</h3>
                    <div class="acquisition-mode">
                        <div class="mode-btn" id="modeStandby" onclick="setMode('standby')">
                            <div class="icon">‚è∏Ô∏è</div>
                            <div class="label">ESPERA</div>
                        </div>
                        <div class="mode-btn" id="modeFluoro" onclick="setMode('fluoro')">
                            <div class="icon">üì°</div>
                            <div class="label">FLUOROSCOPIA</div>
                        </div>
                        <div class="mode-btn" id="modeCine" onclick="setMode('cine')">
                            <div class="icon">üé¨</div>
                            <div class="label">CINE</div>
                        </div>
                    </div>

                    <div class="pedal-controls">
                        <div class="pedal fluoro" id="pedalFluoro">
                            <div class="pedal-icon">üî¶</div>
                            <div class="pedal-label">FLUORO</div>
                        </div>
                        <div class="pedal cine" id="pedalCine">
                            <div class="pedal-icon">‚è∫Ô∏è</div>
                            <div class="pedal-label">CINE</div>
                        </div>
                    </div>
                </div>

                <!-- Par√°metros de Exposici√≥n -->
                <div class="control-section">
                    <h3>‚ö° Par√°metros de Exposici√≥n</h3>
                    
                    <div class="parameter-control">
                        <div class="parameter-header">
                            <span class="parameter-label">kV (Kilovoltaje)</span>
                            <span class="parameter-value"><span id="kvValue">75</span> kV</span>
                        </div>
                        <input type="range" class="parameter-slider" min="60" max="120" value="75" id="kvSlider" oninput="updateParameter('kv', this.value)">
                    </div>

                    <div class="parameter-control">
                        <div class="parameter-header">
                            <span class="parameter-label">mA (Miliamperaje)</span>
                            <span class="parameter-value"><span id="maValue">800</span> mA</span>
                        </div>
                        <input type="range" class="parameter-slider" min="400" max="1200" value="800" step="50" id="maSlider" oninput="updateParameter('ma', this.value)">
                    </div>

                    <div class="parameter-control">
                        <div class="parameter-header">
                            <span class="parameter-label">FPS (Fotogramas/seg)</span>
                            <span class="parameter-value"><span id="fpsValue">15</span> fps</span>
                        </div>
                        <input type="range" class="parameter-slider" min="7" max="30" value="15" step="1" id="fpsSlider" oninput="updateParameter('fps', this.value)">
                    </div>

                    <div class="parameter-control">
                        <div class="parameter-header">
                            <span class="parameter-label">Zoom Digital</span>
                            <span class="parameter-value"><span id="zoomValue">100</span>%</span>
                        </div>
                        <input type="range" class="parameter-slider" min="100" max="300" value="100" step="10" id="zoomSlider" oninput="updateParameter('zoom', this.value)">
                    </div>

                    <div class="dose-indicators">
                        <div class="dose-card">
                            <div class="dose-label">DOSIS TOTAL</div>
                            <div>
                                <span class="dose-value" id="totalDose">0</span>
                                <span class="dose-unit">mGy</span>
                            </div>
                        </div>
                        <div class="dose-card">
                            <div class="dose-label">DAP</div>
                            <div>
                                <span class="dose-value" id="dapValue">0</span>
                                <span class="dose-unit">Gy¬∑cm¬≤</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Colimaci√≥n -->
                <div class="control-section">
                    <h3>üìè Colimaci√≥n</h3>
                    <div class="collimation-control">
                        <div class="collimation-slider">
                            <div class="collimation-label">SUPERIOR</div>
                            <input type="range" class="parameter-slider" min="0" max="100" value="0" oninput="updateCollimation('top', this.value)">
                        </div>
                        <div class="collimation-slider">
                            <div class="collimation-label">INFERIOR</div>
                            <input type="range" class="parameter-slider" min="0" max="100" value="0" oninput="updateCollimation('bottom', this.value)">
                        </div>
                        <div class="collimation-slider">
                            <div class="collimation-label">IZQUIERDA</div>
                            <input type="range" class="parameter-slider" min="0" max="100" value="0" oninput="updateCollimation('left', this.value)">
                        </div>
                        <div class="collimation-slider">
                            <div class="collimation-label">DERECHA</div>
                            <input type="range" class="parameter-slider" min="0" max="100" value="0" oninput="updateCollimation('right', this.value)">
                        </div>
                    </div>
                    
                    <div class="control-buttons">
                        <button class="control-btn" onclick="openCollimation()">‚¨ú Abrir</button>
                        <button class="control-btn" onclick="closeCollimation()">‚¨õ Cerrar</button>
                    </div>
                </div>

                <!-- Herramientas -->
                <div class="control-section">
                    <h3>üõ†Ô∏è Herramientas</h3>
                    <div class="control-buttons">
                        <button class="control-btn" onclick="toggleGrid()">
                            <span>üî≤</span> Cuadr√≠cula
                        </button>
                        <button class="control-btn" onclick="toggleSubtraction()">
                            <span>üé≠</span> Sustracci√≥n
                        </button>
                        <button class="control-btn" onclick="enhanceImage()">
                            <span>‚ú®</span> Realzar
                        </button>
                        <button class="control-btn" onclick="invertColors()">
                            <span>üîÑ</span> Invertir
                        </button>
                        <button class="control-btn" onclick="freezeImage()">
                            <span>‚ùÑÔ∏è</span> Congelar
                        </button>
                        <button class="control-btn" onclick="saveImage()">
                            <span>üíæ</span> Guardar
                        </button>
                    </div>

                    <div class="quick-actions">
                        <button class="quick-btn" onclick="lastImageHold()">üì∏ LIH</button>
                        <button class="quick-btn" onclick="roadmap()">üó∫Ô∏è Roadmap</button>
                        <button class="quick-btn" onclick="stentBoost()">üîç StentBoost</button>
                    </div>
                </div>

                <!-- Info del Paciente -->
                <div class="control-section">
                    <h3>üë§ Informaci√≥n del Paciente</h3>
                    <div class="patient-info">
                        <div class="patient-info-row">
                            <span class="patient-info-label">Nombre:</span>
                            <span class="patient-info-value">SIMULACI√ìN EDUCATIVA</span>
                        </div>
                        <div class="patient-info-row">
                            <span class="patient-info-label">ID:</span>
                            <span class="patient-info-value">SIM-2026-001</span>
                        </div>
                        <div class="patient-info-row">
                            <span class="patient-info-label">Edad:</span>
                            <span class="patient-info-value">-- a√±os</span>
                        </div>
                        <div class="patient-info-row">
                            <span class="patient-info-label">Peso:</span>
                            <span class="patient-info-value">-- kg</span>
                        </div>
                        <div class="patient-info-row">
                            <span class="patient-info-label">Estudio:</span>
                            <span class="patient-info-value">CORONARIOGRAF√çA</span>
                        </div>
                        <div class="patient-info-row">
                            <span class="patient-info-label">Fecha:</span>
                            <span class="patient-info-value" id="studyDate">--/--/----</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script>
        // Variables globales
        let scene, camera, renderer, heart, arteries = {};
        let angles = { rao: 0, cran: 0 };
        let parameters = { kv: 75, ma: 800, fps: 15, zoom: 100 };
        let collimation = { top: 0, bottom: 0, left: 0, right: 0 };
        let currentMode = 'standby';
        let fluoroActive = false;
        let cineActive = false;
        let totalDose = 0;
        let fluoTime = 0;
        let fluoInterval = null;
        let joystickActive = { rao: false, cran: false };

        // Inicializar Sistema
        function initSystem() {
            setTimeout(() => {
                document.getElementById('loadingSystem').style.display = 'none';
                initFluoroscopy();
                initJoysticks();
                initPedals();
                updateSystemTime();
                setInterval(updateSystemTime, 1000);
                setMode('standby');
                
                // Fecha del estudio
                const today = new Date();
                document.getElementById('studyDate').textContent = today.toLocaleDateString('es-PE');
            }, 2000);
        }

        // Inicializar Canvas de Fluoroscopia
        function initFluoroscopy() {
            const canvas = document.getElementById('fluoroscopyCanvas');
            scene = new THREE.Scene();
            scene.background = new THREE.Color(0x000000);
            
            camera = new THREE.PerspectiveCamera(45, canvas.clientWidth / canvas.clientHeight, 0.1, 1000);
            camera.position.set(0, 5, 15);
            camera.lookAt(0, 0, 0);
            
            renderer = new THREE.WebGLRenderer({ 
                canvas, 
                antialias: true,
                alpha: false
            });
            renderer.setSize(canvas.clientWidth, canvas.clientHeight);
            renderer.setPixelRatio(window.devicePixelRatio);
            
            // Iluminaci√≥n
            const ambientLight = new THREE.AmbientLight(0xffffff, 0.4);
            scene.add(ambientLight);
            
            const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
            directionalLight.position.set(10, 10, 10);
            scene.add(directionalLight);
            
            const backLight = new THREE.DirectionalLight(0xffffff, 0.3);
            backLight.position.set(-10, -10, -10);
            scene.add(backLight);
            
            // Crear anatom√≠a coronaria
            createCoronaryAnatomy();
            
            // Resize
            window.addEventListener('resize', onWindowResize);
            
            // Iniciar renderizado
            animate();
        }

        function createCoronaryAnatomy() {
            heart = new THREE.Group();
            
            // Coraz√≥n
            const heartGeometry = new THREE.SphereGeometry(2, 32, 32);
            const heartMaterial = new THREE.MeshPhongMaterial({
                color: 0x880000,
                transparent: true,
                opacity: 0.2,
                shininess: 30
            });
            const heartMesh = new THREE.Mesh(heartGeometry, heartMaterial);
            heartMesh.scale.set(1.2, 1.3, 0.9);
            heart.add(heartMesh);
            
            // Tronco Com√∫n Izquierdo
            arteries.lm = createArtery(
                new THREE.Vector3(0, 1.8, 2.2),
                new THREE.Vector3(-0.5, 1.4, 2.4),
                0.18, 0xff4444
            );
            
            // LAD
            const ladPoints = [
                new THREE.Vector3(-0.5, 1.4, 2.4),
                new THREE.Vector3(-0.9, 0.8, 2.5),
                new THREE.Vector3(-1.1, 0, 2.4),
                new THREE.Vector3(-1.2, -0.8, 2.2),
                new THREE.Vector3(-1.1, -1.6, 2)
            ];
            arteries.lad = createCurvedArtery(ladPoints, 0.14, 0xff4444);
            
            // Diagonales
            arteries.d1 = createArtery(
                new THREE.Vector3(-0.9, 0.8, 2.5),
                new THREE.Vector3(-1.6, 0.9, 2.8),
                0.09, 0xffaa00
            );
            
            arteries.d2 = createArtery(
                new THREE.Vector3(-1.1, 0, 2.4),
                new THREE.Vector3(-1.9, -0.1, 2.7),
                0.08, 0xffaa00
            );
            
            // Circunfleja
            const lcxPoints = [
                new THREE.Vector3(-0.5, 1.4, 2.4),
                new THREE.Vector3(-1, 1.3, 1.8),
                new THREE.Vector3(-1.6, 1, 1),
                new THREE.Vector3(-2, 0.6, 0),
                new THREE.Vector3(-2.2, 0.2, -0.8)
            ];
            arteries.lcx = createCurvedArtery(lcxPoints, 0.12, 0xff6666);
            
            // Marginales
            arteries.om1 = createArtery(
                new THREE.Vector3(-1, 1.3, 1.8),
                new THREE.Vector3(-2.1, 1.5, 2),
                0.09, 0x00ff88
            );
            
            arteries.om2 = createArtery(
                new THREE.Vector3(-1.6, 1, 1),
                new THREE.Vector3(-2.4, 1.1, 1.3),
                0.08, 0x00ff88
            );
            
            // RCA
            const rcaPoints = [
                new THREE.Vector3(0, 1.8, 2.2),
                new THREE.Vector3(0.8, 1.6, 2),
                new THREE.Vector3(1.6, 1.2, 1.4),
                new THREE.Vector3(2.1, 0.6, 0.5),
                new THREE.Vector3(2.2, -0.2, -0.5),
                new THREE.Vector3(2, -1, -1.2),
                new THREE.Vector3(1.3, -1.7, -1.6)
            ];
            arteries.rca = createCurvedArtery(rcaPoints, 0.14, 0x4444ff);
            
            // PDA
            const pdaPoints = [
                new THREE.Vector3(1.3, -1.7, -1.6),
                new THREE.Vector3(0.5, -2.1, -1.5),
                new THREE.Vector3(0, -2.3, -1),
                new THREE.Vector3(-0.4, -2.4, -0.4)
            ];
            arteries.pda = createCurvedArtery(pdaPoints, 0.1, 0x6666ff);
            
            scene.add(heart);
        }

        function createArtery(start, end, radius, color) {
            const direction = new THREE.Vector3().subVectors(end, start);
            const length = direction.length();
            const geometry = new THREE.CylinderGeometry(radius, radius, length, 16);
            const material = new THREE.MeshPhongMaterial({
                color: color,
                shininess: 100,
                emissive: color,
                emissiveIntensity: 0.2
            });
            const artery = new THREE.Mesh(geometry, material);
            artery.position.copy(start).add(direction.multiplyScalar(0.5));
            const axis = new THREE.Vector3(0, 1, 0);
            artery.quaternion.setFromUnitVectors(axis, direction.normalize());
            heart.add(artery);
            return artery;
        }

        function createCurvedArtery(points, radius, color) {
            const curve = new THREE.CatmullRomCurve3(points);
            const geometry = new THREE.TubeGeometry(curve, 64, radius, 16, false);
            const material = new THREE.MeshPhongMaterial({
                color: color,
                shininess: 100,
                emissive: color,
                emissiveIntensity: 0.2
            });
            const artery = new THREE.Mesh(geometry, material);
            heart.add(artery);
            return artery;
        }

        function animate() {
            requestAnimationFrame(animate);
            
            // Aplicar rotaci√≥n seg√∫n √°ngulos
            heart.rotation.y = THREE.MathUtils.degToRad(-angles.rao);
            heart.rotation.x = THREE.MathUtils.degToRad(angles.cran);
            
            renderer.render(scene, camera);
        }

        // Joysticks
        function initJoysticks() {
            const handleRAO = document.getElementById('handleRAO');
            const handleCRAN = document.getElementById('handleCRAN');
            const joystickRAO = document.getElementById('joystickRAO');
            const joystickCRAN = document.getElementById('joystickCRAN');
            
            setupJoystick(handleRAO, joystickRAO, 'rao');
            setupJoystick(handleCRAN, joystickCRAN, 'cran');
        }

        function setupJoystick(handle, container, type) {
            let isDragging = false;
            let startPos = { x: 0, y: 0 };
            const maxDistance = 40;
            
            handle.addEventListener('mousedown', (e) => {
                isDragging = true;
                joystickActive[type] = true;
                const rect = container.getBoundingClientRect();
                startPos = {
                    x: rect.left + rect.width / 2,
                    y: rect.top + rect.height / 2
                };
            });
            
            document.addEventListener('mousemove', (e) => {
                if (!isDragging) return;
                
                const deltaX = e.clientX - startPos.x;
                const deltaY = e.clientY - startPos.y;
                const distance = Math.sqrt(deltaX * deltaX + deltaY * deltaY);
                
                let x = deltaX;
                let y = deltaY;
                
                if (distance > maxDistance) {
                    const angle = Math.atan2(deltaY, deltaX);
                    x = Math.cos(angle) * maxDistance;
                    y = Math.sin(angle) * maxDistance;
                }
                
                handle.style.transform = `translate(calc(-50% + ${x}px), calc(-50% + ${y}px))`;
                
                if (type === 'rao') {
                    angles.rao = (x / maxDistance) * 60;
                    document.getElementById('raoValue').textContent = angles.rao.toFixed(1);
                    document.getElementById('displayRao').textContent = 
                        (angles.rao > 0 ? 'RAO ' : 'LAO ') + Math.abs(angles.rao).toFixed(1) + '¬∞';
                } else {
                    angles.cran = (y / maxDistance) * -45;
                    document.getElementById('cranValue').textContent = angles.cran.toFixed(1);
                    document.getElementById('displayCran').textContent = 
                        (angles.cran > 0 ? 'CRAN ' : 'CAUD ') + Math.abs(angles.cran).toFixed(1) + '¬∞';
                }
            });
            
            document.addEventListener('mouseup', () => {
                if (isDragging) {
                    isDragging = false;
                    joystickActive[type] = false;
                    handle.style.transform = 'translate(-50%, -50%)';
                    
                    if (type === 'rao') {
                        angles.rao = 0;
                        document.getElementById('raoValue').textContent = '0.0';
                        document.getElementById('displayRao').textContent = '0.0¬∞';
                    } else {
                        angles.cran = 0;
                        document.getElementById('cranValue').textContent = '0.0';
                        document.getElementById('displayCran').textContent = '0.0¬∞';
                    }
                }
            });
        }

        // Pedales
        function initPedals() {
            const pedalFluoro = document.getElementById('pedalFluoro');
            const pedalCine = document.getElementById('pedalCine');
            
            // Fluoro pedal
            pedalFluoro.addEventListener('mousedown', () => {
                startFluoroscopy();
            });
            
            pedalFluoro.addEventListener('mouseup', () => {
                stopFluoroscopy();
            });
            
            // Cine pedal
            pedalCine.addEventListener('mousedown', () => {
                startCine();
            });
            
            pedalCine.addEventListener('mouseup', () => {
                stopCine();
            });
            
            // Soporte para teclado
            document.addEventListener('keydown', (e) => {
                if (e.code === 'Space') {
                    e.preventDefault();
                    startFluoroscopy();
                } else if (e.code === 'Enter') {
                    e.preventDefault();
                    startCine();
                }
            });
            
            document.addEventListener('keyup', (e) => {
                if (e.code === 'Space') {
                    e.preventDefault();
                    stopFluoroscopy();
                } else if (e.code === 'Enter') {
                    e.preventDefault();
                    stopCine();
                }
            });
        }

        // Control de Fluoroscopia
        function startFluoroscopy() {
            if (fluoroActive) return;
            
            fluoroActive = true;
            document.getElementById('pedalFluoro').classList.add('active');
            document.getElementById('displayMode').textContent = 'FLUOROSCOPIA';
            
            // Iniciar contador de tiempo
            fluoInterval = setInterval(() => {
                fluoTime++;
                const minutes = Math.floor(fluoTime / 60);
                const seconds = fluoTime % 60;
                document.getElementById('fluoTime').textContent = 
                    `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                
                // Incrementar dosis
                const doserate = (parameters.kv / 100) * (parameters.ma / 1000) * 0.1;
                totalDose += doserate;
                document.getElementById('doseValue').textContent = totalDose.toFixed(1);
                document.getElementById('totalDose').textContent = totalDose.toFixed(1);
                
                // Actualizar barra de dosis
                const dosePercent = Math.min((totalDose / 1000) * 100, 100);
                document.getElementById('doseMeter').style.width = dosePercent + '%';
                
                // Actualizar barra de tiempo
                const timePercent = Math.min((fluoTime / 600) * 100, 100);
                document.getElementById('timeMeter').style.width = timePercent + '%';
            }, 1000);
        }

        function stopFluoroscopy() {
            if (!fluoroActive) return;
            
            fluoroActive = false;
            document.getElementById('pedalFluoro').classList.remove('active');
            document.getElementById('displayMode').textContent = 'ESPERA';
            
            if (fluoInterval) {
                clearInterval(fluoInterval);
                fluoInterval = null;
            }
        }

        function startCine() {
            if (cineActive) return;
            
            cineActive = true;
            document.getElementById('pedalCine').classList.add('active');
            document.getElementById('displayMode').textContent = 'GRABANDO CINE';
            
            // Dosis m√°s alta en cine
            setTimeout(() => {
                const cineDose = (parameters.kv / 100) * (parameters.ma / 1000) * parameters.fps * 0.5;
                totalDose += cineDose;
                document.getElementById('doseValue').textContent = totalDose.toFixed(1);
                document.getElementById('totalDose').textContent = totalDose.toFixed(1);
                
                const dosePercent = Math.min((totalDose / 1000) * 100, 100);
                document.getElementById('doseMeter').style.width = dosePercent + '%';
            }, 100);
        }

        function stopCine() {
            if (!cineActive) return;
            
            cineActive = false;
            document.getElementById('pedalCine').classList.remove('active');
            document.getElementById('displayMode').textContent = 'ESPERA';
        }

        // Modos
        function setMode(mode) {
            currentMode = mode;
            
            document.querySelectorAll('.mode-btn').forEach(btn => btn.classList.remove('active'));
            
            if (mode === 'standby') {
                document.getElementById('modeStandby').classList.add('active');
                document.getElementById('displayMode').textContent = 'ESPERA';
            } else if (mode === 'fluoro') {
                document.getElementById('modeFluoro').classList.add('active');
            } else if (mode === 'cine') {
                document.getElementById('modeCine').classList.add('active');
            }
        }

        // Vistas Predefinidas
        function setPresetView(view) {
            const views = {
                'RAO30': { rao: 30, cran: 0 },
                'LAO45': { rao: -45, cran: 0 },
                'LAO60': { rao: -60, cran: 0 },
                'RAO30CRAN': { rao: 30, cran: 25 },
                'LAO45CRAN': { rao: -45, cran: 25 },
                'APCRAN': { rao: 0, cran: 30 },
                'RAO30CAUD': { rao: 30, cran: -25 },
                'LAO45CAUD': { rao: -45, cran: -25 },
                'APCAUD': { rao: 0, cran: -30 }
            };
            
            if (views[view]) {
                angles.rao = views[view].rao;
                angles.cran = views[view].cran;
                
                document.getElementById('raoValue').textContent = angles.rao.toFixed(1);
                document.getElementById('cranValue').textContent = angles.cran.toFixed(1);
                
                document.getElementById('displayRao').textContent = 
                    (angles.rao > 0 ? 'RAO ' : angles.rao < 0 ? 'LAO ' : '') + Math.abs(angles.rao).toFixed(1) + '¬∞';
                document.getElementById('displayCran').textContent = 
                    (angles.cran > 0 ? 'CRAN ' : angles.cran < 0 ? 'CAUD ' : '') + Math.abs(angles.cran).toFixed(1) + '¬∞';
            }
        }

        // Par√°metros
        function updateParameter(param, value) {
            parameters[param] = parseFloat(value);
            
            if (param === 'kv') {
                document.getElementById('kvValue').textContent = value;
                document.getElementById('displayKv').textContent = value;
            } else if (param === 'ma') {
                document.getElementById('maValue').textContent = value;
                document.getElementById('displayMa').textContent = value;
            } else if (param === 'fps') {
                document.getElementById('fpsValue').textContent = value;
                document.getElementById('displayFps').textContent = value;
            } else if (param === 'zoom') {
                document.getElementById('zoomValue').textContent = value;
                document.getElementById('displayZoom').textContent = value + '%';
                camera.position.z = 15 * (200 - value) / 100;
            }
        }

        // Colimaci√≥n
        function updateCollimation(side, value) {
            collimation[side] = parseFloat(value);
        }

        function openCollimation() {
            ['top', 'bottom', 'left', 'right'].forEach(side => {
                collimation[side] = 0;
            });
            document.querySelectorAll('.collimation-slider input').forEach(slider => {
                slider.value = 0;
            });
        }

        function closeCollimation() {
            ['top', 'bottom', 'left', 'right'].forEach(side => {
                collimation[side] = 50;
            });
            document.querySelectorAll('.collimation-slider input').forEach(slider => {
                slider.value = 50;
            });
        }

        // Herramientas
        function toggleGrid() {
            const grid = document.getElementById('gridOverlay');
            grid.classList.toggle('visible');
        }

        function toggleSubtraction() {
            console.log('Sustracci√≥n digital activada');
        }

        function enhanceImage() {
            console.log('Realce de imagen activado');
        }

        function invertColors() {
            console.log('Inversi√≥n de colores activada');
        }

        function freezeImage() {
            console.log('Imagen congelada');
        }

        function saveImage() {
            renderer.render(scene, camera);
            const dataURL = renderer.domElement.toDataURL('image/png');
            const link = document.createElement('a');
            link.download = `angio-${Date.now()}.png`;
            link.href = dataURL;
            link.click();
            console.log('Imagen guardada');
        }

        function lastImageHold() {
            console.log('Last Image Hold activado');
        }

        function roadmap() {
            console.log('Roadmap activado');
        }

        function stentBoost() {
            console.log('StentBoost activado');
        }

        // Controles adicionales
        function resetAngles() {
            angles = { rao: 0, cran: 0 };
            document.getElementById('raoValue').textContent = '0.0';
            document.getElementById('cranValue').textContent = '0.0';
            document.getElementById('displayRao').textContent = '0.0¬∞';
            document.getElementById('displayCran').textContent = '0.0¬∞';
        }

        function parkPosition() {
            angles = { rao: 0, cran: -45 };
            document.getElementById('raoValue').textContent = '0.0';
            document.getElementById('cranValue').textContent = '-45.0';
            document.getElementById('displayRao').textContent = '0.0¬∞';
            document.getElementById('displayCran').textContent = 'CAUD 45.0¬∞';
        }

        function updateSystemTime() {
            const now = new Date();
            const timeStr = now.toLocaleTimeString('es-PE', { hour12: false });
            document.getElementById('systemTime').textContent = timeStr;
        }

        function onWindowResize() {
            const canvas = document.getElementById('fluoroscopyCanvas');
            camera.aspect = canvas.clientWidth / canvas.clientHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(canvas.clientWidth, canvas.clientHeight);
        }

        // Iniciar sistema
        window.addEventListener('load', initSystem);
    </script>
</body>
</html>
